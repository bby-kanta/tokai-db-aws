<%= stylesheet_link_tag "videos", :media => "all" %>

<div class="all-contents">

  <div class="video_box">
    <div class="video-youtube">
      <iframe name="player" width="100%" height="100%" src="https://www.youtube.com/embed/<%= @video.url %>?autoplay=1&loop=1&playlist=<%= @video.url %>" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
    </div>

    <div class="video_title">
      <h3> <%= @video.title %> </h3>
    </div>

    <div class="video_date">
      <h2><%= @video.updated_on %> に公開済み </h2>

    <%# 自分がログインしているときのみ表示  %>
    <% if user_signed_in?  && current_user.id == 1 %>
        <%= link_to '編集',edit_video_path(@video) %>
        <%= link_to '削除',video_path(@video) ,
        method: :delete,
        data: {confirm: '本当に削除しますか？'}
        %>
    <% end %>
    </div>

    <div id="like-<%= @video.id %>"> <%#いいね機能%>
      <%= render partial: "videos/like", locals: {video: @video }%>
    </div>

    <table border="1px" style="border-collapse: collapse; border-color: rgb(238, 232, 232)">

      <tr class="video-description">
        <th> 概要 </th>
        <th>   
          <p> <%=safe_join(@video.description.split("\n"),tag(:br))%> </p>
        </th>
      </tr>

      <tr class="video-highlight">
        <th> 見所 </th>
        <th>   
          <div class="highlight-content"> <%= raw @video.highlight %> </div>
        </th>
      </tr>

      <tr class="video-quotes">
        <th> 名言 </th>
        <th>   
          <p> <%= @video.quotes %> </p>
        </th>
      </tr>

      <tr>
        <th> ランク </th>
        <th>
          <div class="video-rate">
            <% case @video.rate %>
              <% when 1 %>
                <h3 class="S"> S </h3>
              <% when 2 %>
                <h3 class="A"> A </h3> 
              <% when 3 %>
                <h3 class="B"> B </h3> 
              <% else %>
                <h3 class="C"> C </h3> 
            <% end %>
          </div>
        </th>
      </tr>

      <tr class="video_kind_of">
        <th> チャンネル種類 </th>
        <th>
          <div class="btn channel">
            <% case @video.kind_of %>
              <% when 0 %>
                <%= link_to "メインチャンネル", search_videos_path(@search, :'q[kind_of_eq' => 0 ) %>
              <% when 1 %>
                <%= link_to "東海オンエアの控え室", search_videos_path(@search, :'q[kind_of_eq' => 1 ) %>
              <% when 2 %>
                <%= link_to "個人チャンネル", search_videos_path(@search, :'q[kind_of_eq' => 2 ) %>
              <% else %>
                <%= link_to "その他のチャンネル", search_videos_path(@search, :'q[kind_of_eq' => 3 ) %>
            <% end %>
          </div>
        </th>
      </tr>

      <tr>
        <th> カテゴリー </th>
        <th>   
          <div class="btn video-category">
            <% case @video.category %>
              <% when 0 %>
                <%= link_to "企画もの", search_videos_path(@search, :'q[category_eq' => 0 ) %>
              <% when 1 %>
                <%= link_to "サブチャン", search_videos_path(@search, :'q[category_eq' => 1 ) %>
              <% when 2 %>
                <%= link_to "コント", search_videos_path(@search, :'q[category_eq' => 2 ) %>
              <% when 3 %>
                <%= link_to "クイズ", search_videos_path(@search, :'q[category_eq' => 3 ) %>
              <% when 4 %>
                <%= link_to "選手権", search_videos_path(@search, :'q[category_eq' => 4 ) %>
              <% when 5 %>
                <%= link_to "検証系", search_videos_path(@search, :'q[category_eq' => 5 ) %>
              <% when 6 %>
                <%= link_to "対決", search_videos_path(@search, :'q[category_eq' => 6 ) %>
              <% when 7 %>
                <%= link_to "王", search_videos_path(@search, :'q[category_eq' => 7 ) %>
              <% when 8 %>
                <%= link_to "文理対決", search_videos_path(@search, :'q[category_eq' => 8 ) %>
              <% when 9 %>
                <%= link_to "旅行", search_videos_path(@search, :'q[category_eq' => 9 ) %>
              <% when 10 %>
                <%= link_to "料理", search_videos_path(@search, :'q[category_eq' => 10 ) %>
              <% when 11 %>
                <%= link_to "スポーツ", search_videos_path(@search, :'q[category_eq' => 11 ) %>
              <% when 12 %>
                <%= link_to "ドッキリ", search_videos_path(@search, :'q[category_eq' => 12 ) %>
              <% when 13 %>
                <%= link_to "ゲーム", search_videos_path(@search, :'q[category_eq' => 13 ) %>
              <% when 14 %>
                <%= link_to "コラボ", search_videos_path(@search, :'q[category_eq' => 14 ) %>
              <% when 91 %>
                <%= link_to "ニンマリシティへようこそ", search_videos_path(@search, :'q[category_eq' => 91 ) %>
              <% when 92 %>
                <%= link_to "ゆめまる美術館", search_videos_path(@search, :'q[category_eq' => 92 ) %>
              <% when 93 %>
                <%= link_to "ブラーボりょうのボンサバドゥチャンネル", search_videos_path(@search, :'q[category_eq' => 93 ) %>
              <% when 94 %>
                <%= link_to "虫眼鏡の放送部", search_videos_path(@search, :'q[category_eq' => 94 ) %>
              <% when 95 %>
                <%= link_to "としみつ東海オンエアの", search_videos_path(@search, :'q[category_eq' => 95 ) %>
              <% when 96 %>
                <%= link_to "動画アップロードチャンネル", search_videos_path(@search, :'q[category_eq' => 96 ) %>
              <% when 99 %>
                <%= link_to "ごはんじゃんけん", search_videos_path(@search, :'q[category_eq' => 99 ) %>
              <% when 98 %>
                <%= link_to "いじわる", search_videos_path(@search, :'q[category_eq' => 98 ) %>
              <% when 97 %>
                <%= link_to "十字架(サブチャン)", search_videos_path(@search, :'q[category_eq' => 97 ) %>
              <% else %>
                <%= link_to "その他", search_videos_path(@search, :'q[kind_of_eq' => 3 ) %>
            <% end %>
          </div>
        </th>
      </tr>

      <tr>
        <th> 登場メンバー </th>
        <th>
          <div class="video-people">
            <% @video.people.each do |person| %>
                <%= render partial: "person-color-link", locals: { person_kind: person.name,person: person } %>
            <% end %>
          </div>
        </th>
      </tr>

      <tr class="video-mvp">
        <th> マンオブザマッチ </th>
        <th>
          <div class="video-person-mvp">
            <%= render partial: "person-color-link", locals: { person_kind: @video.mvp } %>
          </div>
        </th>
      </tr>

      <tr>
        <th> 編集者 </th>
        <th>
          <div class="video-person-editor">
            <%= render partial: "person-color-link", locals: { person_kind: @video.editor } %>
          </div>
        </th>
      </tr>


      <tr>
        <th> 撮影場所 </th>
        <th>
          <div class="places">
            <% @video.places.each do |place| %>
              <%= link_to place_path(place.id) do %>
                <div class="btn btn-danger">
                  <%= place.name %>
                </div>
              <% end %>
            <% end %>
          </div>
        </th>
      </tr>

      <tr>
        <th> BGM </th>
        <th>
          <div class="musics">
            <% @video.musics.each do |music| %>
              <div class="btn btn-success">
                <%= link_to music.name ,music_path(music.id)%>
              </div>
            <% end %>
          </div>
        </th>
      </tr>

      <tr>
        <th> 罰ゲーム </th>
        <th>
          <div class="penalties">
              <%= render partial: "penalties/penalty-color", locals: { penalties: @video.penalties }%>
          </div> <%# video-tags %>
        </th>
      </tr>

      <tr>
        <th> ハッシュタグ </th>
        <th> 
          <div class="tags">
              <%= render partial: "tags/tag-color", locals: { tags: @video.tags }%>
          </div> <%# video-tags %>
        </th>
      </tr>

    </table>

    <div class="comments">

      <div class="tag_form">
        <h2>コメント入力フォーム</h2>
        <%= form_for ([@video,@comment]) do |a| %>

          <div class="tag-field">
            <%= a.text_field :content,placeholder:'コメントを入力してください' %>
          </div>

          <div>
            <%= a.submit %>
          </div>

        <% end %>

      <% @comments.each do |comment|%>

        <%= comment.user.name %>
        <%= comment.content %>

      <% end %>

    </div>

  </div>

  <div class="related-videos">
    <%= render partial: "video-articles-show", locals: { videos: @related }%>
    <%= render partial: "video-articles-show", locals: { videos: Video.all.sample(6) }%>
  </div>

</div>

<div class="video-highlight">
  <div class="highlight-content"> <%= raw @video.highlight %> </div>
</div>